#!/usr/bin/env ruby

require "rubygems"
require File.expand_path(File.dirname(__FILE__) + "/../lib/scanny")

runner = Scanny::Runner.new

issues = []
ARGV.each do |arg|
  Dir.glob(arg).each { |file| issues += runner.check_file(file) }
end

issues.each {|issue| puts issue}

puts "\nFound #{issues.size} issues."

exit issues.size
